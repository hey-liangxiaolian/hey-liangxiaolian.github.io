扫呗技术对接

**请求签名验证失败是什么原因？**  
只有必传参数参与签名，且并在参数按要求的顺序（支付接口文档序，商户接口字典序）拼接成的字符串末尾追加令牌字符串。

**接口文档中 SDK 这部分**  
都是聚合支付。 第一个 WAP SDK 接口适用于点击调起支付界面；第二个聚合码支付适用于扫码调起支付。都是可以给需要对接的人使用的。

**支付接口 2.1 支付查询**  
轮询部分，查询最多 15 次，查询次数能够增加，只是建议 15 次。若业务需要更多次查询也是可以的，但是间隔时间不能低于 3s/次，还是建议 5 秒一次。数据会返回。

**支付接口里参数 notify_url-外部系统通知地址**  
支付回调地址是接收本公司的信息，对应 2.3 交易通知接口

**小程序支付 URL**  
/pay/100/minipay 按文档序拼接  
/pay/110/minipay 非 null 参数按字典序拼接  
两个版本，key_sign 的生成规则不一样

**通知参数**  
请求头是 txt / xml , body 是 json

**小程序支付，返回"return_code":"02","return_msg":"商户 null 未开通！","result_code":null,时**  
原因：pay_type 肯定传成 000 了
解决办法：按照接口文档传相应参数

**小程序支付，请求返回：预支付失败：当前商户需补齐相关资料后，才可进行相应的支付交易，请商户联系对接的微信支付服务商**  
解决办法：找到对接群里的运营，进行微信认证，认证正式商户号

**小程序支付，请求返回：预支付失败：sub_mch_id 与 sub_appid 不匹配**  
解决：在正式后台里，使用正式商户号查询，查看是什么通道，然后将 appid 配置到参数配置和关注配置里

**公众号支付——支付页面报错：当前页面的 URL 未注册：XXX**  
解决办法：拿到正式商户号进正式后台查询，打开微信支付配置，查看是什么通道，再去相应通道，打开关注配置，将 URL 配置进 支付授权目录配置  
注意：测试时配置测试的 URL，上线后配置为正式的 URL，URL 配置数量有限，需再将配置的测试 URL 删除
